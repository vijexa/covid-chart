(this["webpackJsonpcovid-chart"]=this["webpackJsonpcovid-chart"]||[]).push([[0],{199:function(t,n,e){},387:function(t,n,e){"use strict";e.r(n);var r=e(4),a=e(1),o=e.n(a),c=e(60),i=e.n(c),u=(e(199),e(10)),s=e(11),l=e(24),d=e.n(l),f=e(44),h=e(12),b=e(13),j=e(15),p=e(14),v=e(21),O=e(2),m=e(69),g=e(6),y=e(102),x=e(96),k=e(164);function w(t){return Object(k.a)(g.c).bindL("country",(function(){return t.country?g.d(t.country):g.b})).bindL("indicator",(function(){return function(t){switch(t){case"deaths":case"cases":return g.d(t);default:return g.b}}(t.indicator)})).bindL("dailyCount",(function(){return void 0!==t.daily_count?g.d(t.daily_count):g.d(0)})).bindL("year_week",(function(){return t.year_week?g.d(t.year_week):g.b})).bindL("rate14day",(function(){return function(t){var n=parseFloat(null!==t&&void 0!==t?t:"");return n?g.d(n):g.d(0)}(t.rate_14_day)})).bindL("source",(function(){return t.source?g.d(t.source):g.d("no source")})).return(x.identity)}function C(t){return y.a(Object(x.pipe)(t,y.b(w)))}function N(t,n){var e=t.toLowerCase();return n.filter((function(t){return t.country.toLowerCase()===e}))}function D(t,n){return n.filter((function(n){return n.indicator===t}))}function E(t){return t.sort((function(t,n){return t.year_week>n.year_week?1:-1}))}function L(t){return t.map((function(t){return t.country})).sort((function(t,n){var e=t.toLowerCase(),r=n.toLowerCase();return e<r?-1:e>r?1:0})).reduce((function(t,n){return t[t.length-1]!==n?[].concat(Object(m.a)(t),[n]):t}),[])}var _="https://cors-anywhere.herokuapp.com/https://opendata.ecdc.europa.eu/covid19/nationalcasedeath/json/";function M(t){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(null!==n&&void 0!==n?n:_).then(function(){var t=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=11;break}if(!n.body){t.next=7;break}return t.next=4,n.json().then((function(t){return t?v.c(t):v.b({error:"json is empty"})})).catch((function(t){return v.b({error:"json cannot be parsed, reason: "+t})}));case 4:t.t1=t.sent,t.next=8;break;case 7:t.t1=v.b({error:"body is empty"});case 8:t.t0=t.t1,t.next=12;break;case 11:t.t0=v.b({error:"http response was not ok, it was: ".concat(n.status," ").concat(n.statusText)});case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).catch((function(t){return v.b({error:"network problem: ".concat(t)})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var z=e(165);function R(){var t=Object(u.a)(["\n  --rmsc-radius: 15px;\n  --rmsc-p: 0.5em;\n  --rmsc-h: 1.75em;\n\n  div, div div, div div span {\n    transition: none !important;\n  }\n"]);return R=function(){return t},t}function A(){var t=Object(u.a)(["\n  padding-bottom: 0.5em;\n"]);return A=function(){return t},t}var F=s.b.div(A()),T=Object(s.b)(z.a)(R()),P=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsxs)("div",{className:t.className,children:[Object(r.jsx)(F,{children:t.title}),Object(r.jsx)(T,{value:t.options.filter((function(n){return t.values.includes(n.value)})),options:t.options,onChange:function(n){return t.onChange(n.map((function(t){return t.value})))},labelledBy:"Select country",hasSelectAll:!1})]})}}]),e}(a.Component),B=[{value:"cases",label:"Confirmed cases"},{value:"deaths",label:"Deaths"}],I=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(P,{className:t.className,title:"\ud83d\udc80 Indicators",values:t.values,options:B,onChange:t.onChange})}}]),e}(a.Component),H=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(P,{className:t.className,title:"\ud83c\udf0d Countries",values:t.values,options:t.options,onChange:t.onChange})}}]),e}(a.Component),J=e(103),K=e(66),W=e(26),q=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t,n=this.props,e=n.x,a=n.y,o=n.payload;return Object(r.jsx)("g",{transform:"translate(".concat((null!==e&&void 0!==e?e:0)+(null!==(t=this.props.initMargin)&&void 0!==t?t:0),",").concat(a,")"),children:Object(r.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(".concat(this.props.angle,")"),children:o.value})})}}]),e}(o.a.PureComponent),G=e(101),Q=e.n(G);function U(){var t=Object(u.a)(["\n  background-color: ",";\n"]);return U=function(){return t},t}function V(){var t=Object(u.a)(["\n  padding: 1em;\n  text-align: center;\n  \n  :first-letter {\n    text-transform: capitalize;  \n  }\n"]);return V=function(){return t},t}var X=s.b.div(V()),Y=s.b.span(U(),(function(t){return t.color})),Z="#e4ffbb",$=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"chainElements",value:function(t,n,e){return 0!==t.length?t.map((function(t){return Object(r.jsx)(Y,{color:e,children:t})})).reduce((function(t,e){return[t,n,e]})):void 0}},{key:"render",value:function(){var t=this.props;return Object(r.jsxs)(X,{children:[this.chainElements(t.indicators," and ","#fff1b5")," in ",this.chainElements(t.countries.slice(0,t.countries.length-1),", ",Z),t.countries.length>1?" and ":"",Object(r.jsx)(Y,{color:Z,children:t.countries[t.countries.length-1]}),", 14 day cumulative per 100 000"]})}}]),e}(a.Component);function tt(){var t=Object(u.a)(["\n  width: 100%;\n"]);return tt=function(){return t},t}var nt=s.b.div(tt()),et=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){var t;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))).formatData=function(n){var e=n.countries.flatMap((function(t){return N(t,n.data)})),r=E(n.indicators.flatMap((function(t){return D(t,e)}))).map((function(n){var e=t.makeEntryName(n.country,n.indicator);return Object(K.a)({date:n.year_week,parameterName:e},e,n.rate14day)}));console.log("kekkkk");var a=r.reduce((function(t,n,e,r){var a;return(null===(a=r[e-1])||void 0===a?void 0:a.date)===n.date?(t[t.length-1][n.parameterName]=n[n.parameterName],t):[].concat(Object(m.a)(t),[n])}),[]);return console.log("datasets:",n.countries,", ",n.indicators,": ",a),a},t}return Object(b.a)(e,[{key:"makeEntryName",value:function(t,n){return"".concat(t,", ").concat(function(t){switch(t){case"cases":return"cc";case"deaths":return"d"}}(n))}},{key:"render",value:function(){var t=this,n=this.props,e=this.formatData(n),a=Object.entries(e[0]).filter((function(t){var n=Object(J.a)(t,2),e=n[0];n[1];return"date"!==e&&"parameterName"!==e}));console.log("props: ",n,", formatted data: ",e);var o,c=(o=a.length,console.log(Q()(0,100,50)),Array.from(new Array(o),(function(t,n){return Q()(360/o*n,100,50)})));console.log("colors:",c);var i=a.map((function(t,n){var e=Object(J.a)(t,2),r=e[0];e[1];return{entry:r,color:c[n]}}));return console.log("data colors:",i),Object(r.jsxs)(nt,{children:[Object(r.jsx)($,{countries:n.countries,indicators:n.indicators}),Object(r.jsx)(W.e,{width:"100%",height:n.height,children:Object(r.jsxs)(W.d,{style:{fontSize:20},data:e,children:[Object(r.jsx)(W.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(r.jsx)(W.f,{dataKey:"date",interval:Math.ceil(1200/window.innerWidth)-1,dx:10,height:90,tick:Object(r.jsx)(q,{angle:-70,initMargin:-14})}),Object(r.jsx)(W.g,{width:35}),Object(r.jsx)(W.b,{}),n.countries.flatMap((function(e){return n.indicators.map((function(n){var a,o;return Object(r.jsx)(W.c,{type:"monotone",dataKey:t.makeEntryName(e,n),stroke:null!==(a=null===(o=i.find((function(r){return r.entry===t.makeEntryName(e,n)})))||void 0===o?void 0:o.color)&&void 0!==a?a:"#000000",dot:!1,strokeWidth:3},t.makeEntryName(e,n))}))}))]})})]})}}]),e}(o.a.Component),rt=e(163),at=e.n(rt);function ot(){var t=Object(u.a)(["\n  width: fit-content;\n  height: ","px;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  text-align: center;\n"]);return ot=function(){return t},t}var ct=s.b.div(ot(),(function(t){return t.height})),it=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsxs)(ct,{height:t.height,children:[Object(r.jsx)(at.a,{size:"2em"}),"Loading data, please stand by"]})}}]),e}(o.a.Component),ut=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(ct,{height:t.height,children:t.countries&&0!==t.countries.length&&t.indicators&&0!==t.indicators.length?"No data to show for ".concat(t.indicators.join(", ")," in ").concat(t.countries.join(", "),". The data may be corrupted."):"No data to show. Please, select some options above."})}}]),e}(o.a.Component);function st(){var t=Object(u.a)(["\n  color: #ff0000;\n  padding: 0.25em;\n"]);return st=function(){return t},t}function lt(){var t=Object(u.a)(["\n  --button-color: #5353ff;\n\n  font-size: 1em;\n  background: transparent;\n  border-radius: 3px;\n  border: 2px solid var(--button-color);\n  color: var(--button-color);\n  margin-top: 1em;\n  padding: 0.75em;\n"]);return lt=function(){return t},t}var dt=s.b.button(lt()),ft=s.b.span(st());function ht(t){return Object(r.jsxs)(ct,{height:t.height,children:["Data fetching resolved into this error:",Object(r.jsx)(ft,{children:t.children}),Object(r.jsx)(dt,{onClick:t.onRetry,children:"Try again"})]})}var bt=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t,n,e=this.props;return e.loading?Object(r.jsx)(it,{height:e.height}):e.error?Object(r.jsx)(ht,{onRetry:e.onRetry,height:e.height,children:e.error}):e.data&&e.countries&&0!==(null===(t=e.countries)||void 0===t?void 0:t.length)&&e.indicators&&0!==(null===(n=e.indicators)||void 0===n?void 0:n.length)?Object(r.jsx)(et,{height:e.height,data:e.data,countries:e.countries,indicators:e.indicators}):Object(r.jsx)(ut,{height:e.height,countries:e.countries,indicators:e.indicators})}}]),e}(a.Component);function jt(){var t=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return jt=function(){return t},t}function pt(){var t=Object(u.a)(["\n  ","\n"]);return pt=function(){return t},t}function vt(){var t=Object(u.a)(["\n  ","\n"]);return vt=function(){return t},t}function Ot(){var t=Object(u.a)(["\n  padding: 0.25em;\n  padding-left: 0.75em;\n  font-size: 1em;\n  width: 20em;\n  max-width: 95%;\n"]);return Ot=function(){return t},t}var mt=Object(s.a)(Ot()),gt=Object(s.b)(H)(vt(),mt),yt=Object(s.b)(I)(pt(),mt),xt=s.b.div(jt()),kt=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(t){var r;return Object(h.a)(this,e),(r=n.call(this,t)).changeData=function(t,n,e){return r.setState({data:null!==t&&void 0!==t?t:r.state.data,countries:null!==n&&void 0!==n?n:r.state.countries,indicators:null!==e&&void 0!==e?e:r.state.indicators,countryOptions:r.state.countryOptions?L(null!==t&&void 0!==t?t:[]).map((function(t){return{value:t,label:t}})):[],loading:!1})},r.raiseError=function(t){return r.setState({loading:!1,error:t})},r.fetchDataOrRaiseError=Object(f.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setState({loading:!0}),t.next=3,M();case 3:n=t.sent,console.log("rawData: ",n),Object(O.e)(n,v.a((function(t){console.log("error: ",t.error),r.raiseError(t.error)}),(function(t){return r.changeData(C(t))})));case 6:case"end":return t.stop()}}),t)}))),r.state={loading:!1,indicators:[],countryOptions:[]},r}return Object(b.a)(e,[{key:"componentDidMount",value:function(){this.fetchDataOrRaiseError()}},{key:"render",value:function(){var t,n,e=this,a=this.state,o=this.props;return console.log(L(null!==(t=a.data)&&void 0!==t?t:[]),a.countries,a.countryOptions),Object(r.jsxs)(xt,{children:[Object(r.jsx)(gt,{values:null!==(n=a.countries)&&void 0!==n?n:[],options:a.countryOptions,onChange:function(t){return e.changeData(a.data,t,a.indicators)}}),Object(r.jsx)(yt,{values:a.indicators,onChange:function(t){return e.changeData(a.data,a.countries,t)}}),Object(r.jsx)(bt,{height:o.chartHeight,loading:a.loading,data:a.data,countries:a.countries,indicators:a.indicators,error:a.error,onRetry:this.fetchDataOrRaiseError})]})}}]),e}(a.Component);function wt(){var t=Object(u.a)(["\n  font-size: 2em;\n  margin-bottom: 0.25em;\n  text-align: center;\n"]);return wt=function(){return t},t}function Ct(){var t=Object(u.a)(["\n  text-align: left;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  justify-content: flex-start;\n  font-size: calc(10px + 2vmin);\n  color: rgb(39, 39, 39);\n  padding: 1em;\n"]);return Ct=function(){return t},t}var Nt=s.b.div(Ct()),Dt=s.b.header(wt());var Et=function(){return Object(r.jsxs)(Nt,{children:[Object(r.jsx)(Dt,{children:"Covid Chart"}),Object(r.jsx)(kt,{chartHeight:800})]})},Lt=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,390)).then((function(n){var e=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,c=n.getTTFB;e(t),r(t),a(t),o(t),c(t)}))};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Et,{})}),document.getElementById("root")),Lt()}},[[387,1,2]]]);
//# sourceMappingURL=main.0d8e5cc1.chunk.js.map
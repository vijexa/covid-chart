(this["webpackJsonpcovid-chart"]=this["webpackJsonpcovid-chart"]||[]).push([[0],{199:function(t,n,e){},387:function(t,n,e){"use strict";e.r(n);var r=e(5),a=e(1),c=e.n(a),o=e(60),i=e.n(o),u=(e(199),e(14)),s=e(15),d=e(24),l=e.n(d),f=e(44),h=e(10),b=e(11),j=e(13),p=e(12),v=e(21),O=e(2),m=e(69),g=e(6),y=e(102),x=e(96),k=e(164);function w(t){return Object(k.a)(g.c).bindL("country",(function(){return t.country?g.d(t.country):g.b})).bindL("indicator",(function(){return function(t){switch(t){case"deaths":case"confirmed cases":return g.d(t);default:return g.b}}(t.indicator)})).bindL("dailyCount",(function(){return void 0!==t.daily_count?g.d(t.daily_count):g.d(0)})).bindL("date",(function(){return function(t){var n=new Date(null!==t&&void 0!==t?t:"");switch(n.toString()){case"Invalid Date":return g.b;default:return g.d(n)}}(t.date)})).bindL("rate14day",(function(){return function(t){var n=parseFloat(null!==t&&void 0!==t?t:"");return n?g.d(n):g.d(0)}(t.rate_14_day)})).bindL("source",(function(){return t.source?g.d(t.source):g.d("no source")})).return(x.identity)}function C(t){return y.a(Object(x.pipe)(t,y.b(w)))}function N(t,n){var e=t.toLowerCase();return n.filter((function(t){return t.country.toLowerCase()===e}))}function D(t,n){return n.filter((function(n){return n.indicator===t}))}function L(t){return t.sort((function(t,n){return t.date.getTime()-n.date.getTime()}))}function E(t){return t.map((function(t){return t.country})).sort((function(t,n){var e=t.toLowerCase(),r=n.toLowerCase();return e<r?-1:e>r?1:0})).reduce((function(t,n){return t[t.length-1]!==n?[].concat(Object(m.a)(t),[n]):t}),[])}var S="https://cors-anywhere.herokuapp.com/https://opendata.ecdc.europa.eu/covid19/nationalcasedeath/json/";function z(t){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(null!==n&&void 0!==n?n:S).then(function(){var t=Object(f.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=11;break}if(!n.body){t.next=7;break}return t.next=4,n.json().then((function(t){return t?v.c(t):v.b({error:"json is empty"})})).catch((function(t){return v.b({error:"json cannot be parsed, reason: "+t})}));case 4:t.t1=t.sent,t.next=8;break;case 7:t.t1=v.b({error:"body is empty"});case 8:t.t0=t.t1,t.next=12;break;case 11:t.t0=v.b({error:"http response was not ok, it was: ".concat(n.status," ").concat(n.statusText)});case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).catch((function(t){return v.b({error:"network problem: ".concat(t)})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var T=e(165);function A(){var t=Object(u.a)(["\n  --rmsc-radius: 15px;\n  --rmsc-p: 0.5em;\n  --rmsc-h: 1.75em;\n"]);return A=function(){return t},t}function F(){var t=Object(u.a)(["\n  padding-bottom: 0.5em;\n"]);return F=function(){return t},t}var I=s.b.div(F()),P=Object(s.b)(T.a)(A()),_=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsxs)("div",{className:t.className,children:[Object(r.jsx)(I,{children:t.title}),Object(r.jsx)(P,{value:t.options.filter((function(n){return t.values.includes(n.value)})),options:t.options,onChange:function(n){return t.onChange(n.map((function(t){return t.value})))},labelledBy:"Select country",hasSelectAll:!1})]})}}]),e}(a.Component),B=[{value:"confirmed cases",label:"Confirmed cases"},{value:"deaths",label:"Deaths"}],H=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(_,{className:t.className,title:"\ud83d\udc80 Indicators",values:t.values,options:B,onChange:t.onChange})}}]),e}(a.Component),J=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(_,{className:t.className,title:"\ud83c\udf0d Countries",values:t.values,options:t.options,onChange:t.onChange})}}]),e}(a.Component),K=e(103),W=e(66),q=e(26),G=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props,n=t.x,e=t.y,a=t.payload;return Object(r.jsx)("g",{transform:"translate(".concat(n,",").concat(e,")"),children:Object(r.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(".concat(this.props.angle,")"),children:a.value})})}}]),e}(c.a.PureComponent),Q=e(101),R=e.n(Q);function U(){var t=Object(u.a)(["\n  background-color: ",";\n"]);return U=function(){return t},t}function V(){var t=Object(u.a)(["\n  padding: 1em;\n  text-align: center;\n  \n  :first-letter {\n    text-transform: capitalize;  \n  }\n"]);return V=function(){return t},t}var X=s.b.div(V()),Y=s.b.span(U(),(function(t){return t.color})),Z="#e4ffbb",$=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"chainElements",value:function(t,n,e){return 0!==t.length?t.map((function(t){return Object(r.jsx)(Y,{color:e,children:t})})).reduce((function(t,e){return[t,n,e]})):void 0}},{key:"render",value:function(){var t=this.props;return Object(r.jsxs)(X,{children:[this.chainElements(t.indicators," and ","#fff1b5")," in ",this.chainElements(t.countries.slice(0,t.countries.length-1),", ",Z),t.countries.length>1?" and ":"",Object(r.jsx)(Y,{color:Z,children:t.countries[t.countries.length-1]}),", 14 day cumulative"]})}}]),e}(a.Component);function tt(){var t=Object(u.a)(["\n  width: 100%;\n"]);return tt=function(){return t},t}var nt=s.b.div(tt()),et=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){var t;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=n.call.apply(n,[this].concat(a))).formatData=function(n){var e=n.countries.flatMap((function(t){return N(t,n.data)})),r=L(n.indicators.flatMap((function(t){return D(t,e)}))).map((function(n){var e=t.makeEntryName(n.country,n.indicator);return Object(W.a)({date:n.date.getDate()+"."+(n.date.getMonth()+1),parameterName:e},e,n.rate14day)})).reduce((function(t,n,e,r){var a;return(null===(a=r[e-1])||void 0===a?void 0:a.date)===n.date?(t[t.length-1][n.parameterName]=n[n.parameterName],t):[].concat(Object(m.a)(t),[n])}),[]);return console.log("datasets:",n.countries,", ",n.indicators,": ",r),r},t}return Object(b.a)(e,[{key:"makeEntryName",value:function(t,n){return"".concat(t,", ").concat(function(t){switch(t){case"confirmed cases":return"cc";case"deaths":return"d"}}(n))}},{key:"render",value:function(){var t=this,n=this.props,e=this.formatData(n),a=Object.entries(e[0]).filter((function(t){var n=Object(K.a)(t,2),e=n[0];n[1];return"date"!==e&&"parameterName"!==e}));console.log("props: ",n,", formatted data: ",e);var c,o=(c=a.length,console.log(R()(0,100,50)),Array.from(new Array(c),(function(t,n){return R()(360/c*n,100,50)})));console.log("colors:",o);var i=a.map((function(t,n){var e=Object(K.a)(t,2),r=e[0];e[1];return{entry:r,color:o[n]}}));return console.log("data colors:",i),Object(r.jsxs)(nt,{children:[Object(r.jsx)($,{countries:n.countries,indicators:n.indicators}),Object(r.jsx)(q.e,{width:"100%",height:n.height,children:Object(r.jsxs)(q.d,{style:{fontSize:20},data:e,children:[Object(r.jsx)(q.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(r.jsx)(q.f,{dataKey:"date",interval:30,dx:10,height:40,tick:Object(r.jsx)(G,{angle:-55})}),Object(r.jsx)(q.g,{width:35}),Object(r.jsx)(q.b,{}),n.countries.flatMap((function(e){return n.indicators.map((function(n){var a,c;return Object(r.jsx)(q.c,{type:"monotone",dataKey:t.makeEntryName(e,n),stroke:null!==(a=null===(c=i.find((function(r){return r.entry===t.makeEntryName(e,n)})))||void 0===c?void 0:c.color)&&void 0!==a?a:"#000000",dot:!1,strokeWidth:3},t.makeEntryName(e,n))}))}))]})})]})}}]),e}(c.a.Component),rt=e(163),at=e.n(rt);function ct(){var t=Object(u.a)(["\n  width: fit-content;\n  height: ","px;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  text-align: center;\n"]);return ct=function(){return t},t}var ot=s.b.div(ct(),(function(t){return t.height})),it=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsxs)(ot,{height:t.height,children:[Object(r.jsx)(at.a,{size:"2em"}),"Loading data, please stand by"]})}}]),e}(c.a.Component),ut=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(ot,{height:t.height,children:t.countries&&0!==t.countries.length&&t.indicators&&0!==t.indicators.length?"No data to show for ".concat(t.indicators.join(", ")," in ").concat(t.countries.join(", "),". The data may be corrupted."):"No data to show. Please, select some options above."})}}]),e}(c.a.Component),st=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t,n,e=this.props;return e.loading?Object(r.jsx)(it,{height:e.height}):e.data&&e.countries&&0!==(null===(t=e.countries)||void 0===t?void 0:t.length)&&e.indicators&&0!==(null===(n=e.indicators)||void 0===n?void 0:n.length)?Object(r.jsx)(et,{height:e.height,data:e.data,countries:e.countries,indicators:e.indicators}):Object(r.jsx)(ut,{height:e.height,countries:e.countries,indicators:e.indicators})}}]),e}(a.Component);function dt(){var t=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return dt=function(){return t},t}function lt(){var t=Object(u.a)(["\n  ","\n"]);return lt=function(){return t},t}function ft(){var t=Object(u.a)(["\n  ","\n"]);return ft=function(){return t},t}function ht(){var t=Object(u.a)(["\n  padding: 0.25em;\n  padding-left: 0.75em;\n  font-size: 1em;\n  width: 20em;\n  max-width: 95%;\n"]);return ht=function(){return t},t}var bt=Object(s.a)(ht()),jt=Object(s.b)(J)(ft(),bt),pt=Object(s.b)(H)(lt(),bt),vt=s.b.div(dt()),Ot=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(t){var r;return Object(h.a)(this,e),(r=n.call(this,t)).changeData=function(t,n,e){return r.setState({data:null!==t&&void 0!==t?t:r.state.data,countries:null!==n&&void 0!==n?n:r.state.countries,indicators:null!==e&&void 0!==e?e:r.state.indicators,countryOptions:r.state.countryOptions?E(null!==t&&void 0!==t?t:[]).map((function(t){return{value:t,label:t}})):[],loading:!1})},r.state={loading:!1,indicators:[],countryOptions:[]},r}return Object(b.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(f.a)(l.a.mark((function n(){var e;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setState({loading:!0}),n.next=3,z();case 3:e=n.sent,console.log("rawData: ",e),Object(O.e)(e,v.a((function(t){return console.log("error: ",t.error)}),(function(n){return t.changeData(C(n))})));case 6:case"end":return n.stop()}}),n)})))()}},{key:"render",value:function(){var t,n,e=this,a=this.state,c=this.props;return console.log(E(null!==(t=a.data)&&void 0!==t?t:[]),a.countries,a.countryOptions),Object(r.jsxs)(vt,{children:[Object(r.jsx)(jt,{values:null!==(n=a.countries)&&void 0!==n?n:[],options:a.countryOptions,onChange:function(t){return e.changeData(a.data,t,a.indicators)}}),Object(r.jsx)(pt,{values:a.indicators,onChange:function(t){return e.changeData(a.data,a.countries,t)}}),Object(r.jsx)(st,{height:c.chartHeight,loading:a.loading,data:a.data,countries:a.countries,indicators:a.indicators})]})}}]),e}(a.Component);function mt(){var t=Object(u.a)(["\n  font-size: 2em;\n  margin-bottom: 0.25em;\n  text-align: center;\n"]);return mt=function(){return t},t}function gt(){var t=Object(u.a)(["\n  text-align: left;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  justify-content: flex-start;\n  font-size: calc(10px + 2vmin);\n  color: rgb(39, 39, 39);\n  padding: 1em;\n"]);return gt=function(){return t},t}var yt=s.b.div(gt()),xt=s.b.header(mt());var kt=function(){return Object(r.jsxs)(yt,{children:[Object(r.jsx)(xt,{children:"Covid Chart"}),Object(r.jsx)(Ot,{chartHeight:500})]})},wt=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,390)).then((function(n){var e=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;e(t),r(t),a(t),c(t),o(t)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(kt,{})}),document.getElementById("root")),wt()}},[[387,1,2]]]);
//# sourceMappingURL=main.998f1e07.chunk.js.map
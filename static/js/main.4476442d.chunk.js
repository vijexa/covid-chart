(this["webpackJsonpcovid-chart"]=this["webpackJsonpcovid-chart"]||[]).push([[0],{199:function(t,n,e){},387:function(t,n,e){"use strict";e.r(n);var r=e(7),a=e(1),o=e.n(a),c=e(60),i=e.n(c),u=(e(199),e(15)),s=e(16),d=e(24),l=e.n(d),f=e(44),h=e(11),b=e(12),j=e(14),p=e(13),v=e(21),O=e(2),g=e(69),m=e(5),y=e(103),x=e(97),k=e(165);function w(t){return Object(k.a)(m.c).bindL("country",(function(){return t.country?m.d(t.country):m.b})).bindL("indicator",(function(){return function(t){switch(t){case"deaths":case"confirmed cases":return m.d(t);default:return m.b}}(t.indicator)})).bindL("dailyCount",(function(){return void 0!==t.daily_count?m.d(t.daily_count):m.d(0)})).bindL("date",(function(){return function(t){var n=new Date(null!==t&&void 0!==t?t:"");switch(n.toString()){case"Invalid Date":return m.b;default:return m.d(n)}}(t.date)})).bindL("rate14day",(function(){return function(t){var n=parseFloat(null!==t&&void 0!==t?t:"");return n?m.d(n):m.d(0)}(t.rate_14_day)})).bindL("source",(function(){return t.source?m.d(t.source):m.d("no source")})).return(x.identity)}function C(t){return y.a(Object(x.pipe)(t,y.b(w)))}function N(t,n){var e=t.toLowerCase();return n.filter((function(t){return t.country.toLowerCase()===e}))}function D(t,n){return n.filter((function(n){return n.indicator===t}))}function L(t){return t.sort((function(t,n){return t.date.getTime()-n.date.getTime()}))}function S(t){return t.map((function(t){return t.country})).sort((function(t,n){var e=t.toLowerCase(),r=n.toLowerCase();return e<r?-1:e>r?1:0})).reduce((function(t,n){return t[t.length-1]!==n?[].concat(Object(g.a)(t),[n]):t}),[])}var z="https://cors-anywhere.herokuapp.com/https://opendata.ecdc.europa.eu/covid19/nationalcasedeath/json/";function A(t){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(null!==n&&void 0!==n?n:z).then(function(){var t=Object(f.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=11;break}if(!n.body){t.next=7;break}return t.next=4,n.json().then((function(t){return t?v.c(t):v.b({error:"json is empty"})})).catch((function(t){return v.b({error:"json cannot be parsed, reason: "+t})}));case 4:t.t1=t.sent,t.next=8;break;case 7:t.t1=v.b({error:"body is empty"});case 8:t.t0=t.t1,t.next=12;break;case 11:t.t0=v.b({error:"http response was not ok, it was: ".concat(n.status," ").concat(n.statusText)});case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).catch((function(t){return v.b({error:"network problem: ".concat(t)})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var M=e(70),F=[{value:"confirmed cases",label:"Confirmed cases"},{value:"deaths",label:"Deaths"}],T=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(M.a,{className:t.className,value:F.filter((function(n){return t.values.includes(n.value)})),options:F,onChange:function(n){return t.onChange(n.map((function(t){return t.value})))},labelledBy:"Select indicator",hasSelectAll:!1})}}]),e}(a.Component),B=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(M.a,{className:t.className,value:t.options.filter((function(n){return t.values.includes(n.value)})),options:t.options,onChange:function(n){return t.onChange(n.map((function(t){return t.value})))},labelledBy:"Select country",hasSelectAll:!1})}}]),e}(a.Component),_=e(104),I=e(62),P=e(26),H=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props,n=t.x,e=t.y,a=t.payload;return Object(r.jsx)("g",{transform:"translate(".concat(n,",").concat(e,")"),children:Object(r.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(".concat(this.props.angle,")"),children:a.value})})}}]),e}(o.a.PureComponent),J=e(100),K=e.n(J);function W(){var t=Object(u.a)(["\n  padding: 1em;\n  \n  :first-letter {\n    text-transform: capitalize;  \n  }\n"]);return W=function(){return t},t}var q=s.b.div(W()),G=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){var t;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))).formatData=function(n){var e=n.countries.flatMap((function(t){return N(t,n.data)})),r=L(n.indicators.flatMap((function(t){return D(t,e)}))).map((function(n){var e=t.makeEntryName(n.country,n.indicator);return Object(I.a)({date:n.date.getDate()+"."+(n.date.getMonth()+1),parameterName:e},e,n.rate14day)})).reduce((function(t,n,e,r){var a;return(null===(a=r[e-1])||void 0===a?void 0:a.date)===n.date?(t[t.length-1][n.parameterName]=n[n.parameterName],t):[].concat(Object(g.a)(t),[n])}),[]);return console.log("datasets:",n.countries,", ",n.indicators,": ",r),r},t}return Object(b.a)(e,[{key:"makeEntryName",value:function(t,n){return"".concat(t,", ").concat(function(t){switch(t){case"confirmed cases":return"cc";case"deaths":return"d"}}(n))}},{key:"render",value:function(){var t=this,n=this.props,e=this.formatData(n),a=Object.entries(e[0]).filter((function(t){var n=Object(_.a)(t,2),e=n[0];n[1];return"date"!==e&&"parameterName"!==e}));console.log("props: ",n,", formatted data: ",e);var o,c=(o=a.length,console.log(K()(0,100,50)),Array.from(new Array(o),(function(t,n){return K()(360/o*n,100,50)})));console.log("colors:",c);var i=a.map((function(t,n){var e=Object(_.a)(t,2),r=e[0];e[1];return{entry:r,color:c[n]}}));return console.log("data colors:",i),Object(r.jsxs)("div",{children:[Object(r.jsxs)(q,{children:[n.indicators.join(" and ")," in ",n.countries.slice(0,n.countries.length-1).join(", "),n.countries.length>1?" and ":"",n.countries[n.countries.length-1],", 14 day cumulative"]}),Object(r.jsx)(P.e,{width:"100%",height:n.height,children:Object(r.jsxs)(P.d,{style:{fontSize:20},data:e,children:[Object(r.jsx)(P.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(r.jsx)(P.f,{dataKey:"date",interval:30,dx:10,height:40,tick:Object(r.jsx)(H,{angle:-35})}),Object(r.jsx)(P.g,{}),Object(r.jsx)(P.b,{}),n.countries.flatMap((function(e){return n.indicators.map((function(n){var a,o;return Object(r.jsx)(P.c,{type:"monotone",dataKey:t.makeEntryName(e,n),stroke:null!==(a=null===(o=i.find((function(r){return r.entry===t.makeEntryName(e,n)})))||void 0===o?void 0:o.color)&&void 0!==a?a:"#000000",dot:!1,strokeWidth:3},t.makeEntryName(e,n))}))}))]})})]})}}]),e}(o.a.Component),Q=e(164),R=e.n(Q);function U(){var t=Object(u.a)(["\n  width: fit-content;\n  height: ","px;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]);return U=function(){return t},t}var V=s.b.div(U(),(function(t){return t.height})),X=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(V,{height:t.height,children:Object(r.jsx)(R.a,{size:"2em"})})}}]),e}(o.a.Component),Y=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t=this.props;return Object(r.jsx)(V,{height:t.height,children:t.countries&&0!==t.countries.length&&t.indicators&&0!==t.indicators.length?"No data to show for ".concat(t.indicators.join(", ")," in ").concat(t.countries.join(", ")):"No data to show"})}}]),e}(o.a.Component),Z=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(){return Object(h.a)(this,e),n.apply(this,arguments)}return Object(b.a)(e,[{key:"render",value:function(){var t,n,e=this.props;return e.loading?Object(r.jsx)(X,{height:e.height}):e.data&&e.countries&&0!==(null===(t=e.countries)||void 0===t?void 0:t.length)&&e.indicators&&0!==(null===(n=e.indicators)||void 0===n?void 0:n.length)?Object(r.jsx)(G,{height:e.height,data:e.data,countries:e.countries,indicators:e.indicators}):Object(r.jsx)(Y,{height:e.height,countries:e.countries,indicators:e.indicators})}}]),e}(a.Component);function $(){var t=Object(u.a)(["\n  ","\n"]);return $=function(){return t},t}function tt(){var t=Object(u.a)(["\n  ","\n"]);return tt=function(){return t},t}function nt(){var t=Object(u.a)(["\n  padding: 0.5em;\n  margin-bottom: 0.5em;\n  font-size: 1em;\n  width: 100%;\n  border-radius: 0.5em;\n  appearance: none;\n  background-image: url(down-arrow.jpg) no-repeat right;\n"]);return nt=function(){return t},t}var et=Object(s.a)(nt()),rt=Object(s.b)(B)(tt(),et),at=Object(s.b)(T)($(),et),ot=function(t){Object(j.a)(e,t);var n=Object(p.a)(e);function e(t){var r;return Object(h.a)(this,e),(r=n.call(this,t)).changeData=function(t,n,e){return r.setState({data:null!==t&&void 0!==t?t:r.state.data,countries:null!==n&&void 0!==n?n:r.state.countries,indicators:null!==e&&void 0!==e?e:r.state.indicators,countryOptions:r.state.countryOptions?S(null!==t&&void 0!==t?t:[]).map((function(t){return{value:t,label:t}})):[],loading:!1})},r.state={loading:!1,indicators:[],countryOptions:[]},r}return Object(b.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(f.a)(l.a.mark((function n(){var e;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setState({loading:!0}),n.next=3,A();case 3:e=n.sent,console.log("rawData: ",e),Object(O.e)(e,v.a((function(t){return console.log("error: ",t.error)}),(function(n){return t.changeData(C(n))})));case 6:case"end":return n.stop()}}),n)})))()}},{key:"render",value:function(){var t,n,e=this,a=this.state,o=this.props;return console.log(S(null!==(t=a.data)&&void 0!==t?t:[]),a.countries,a.countryOptions),Object(r.jsxs)("div",{children:[Object(r.jsx)(rt,{values:null!==(n=a.countries)&&void 0!==n?n:[],options:a.countryOptions,onChange:function(t){return e.changeData(a.data,t,a.indicators)}}),Object(r.jsx)(at,{values:a.indicators,onChange:function(t){return e.changeData(a.data,a.countries,t)}}),Object(r.jsx)(Z,{height:o.chartHeight,loading:a.loading,data:a.data,countries:a.countries,indicators:a.indicators})]})}}]),e}(a.Component);function ct(){var t=Object(u.a)(["\n  font-size: 2em;\n  margin-bottom: 0.5em;\n"]);return ct=function(){return t},t}function it(){var t=Object(u.a)(["\n  text-align: left;\n  background-color: #ffffff;\n  min-height: 95vh;\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  justify-content: flex-start;\n  font-size: calc(10px + 2vmin);\n  color: rgb(39, 39, 39);\n  padding: 5%;\n"]);return it=function(){return t},t}var ut=s.b.div(it()),st=s.b.header(ct());var dt=function(){return Object(r.jsxs)(ut,{children:[Object(r.jsx)(st,{children:"Super cool app description"}),Object(r.jsx)(ot,{chartHeight:500})]})},lt=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,390)).then((function(n){var e=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,c=n.getTTFB;e(t),r(t),a(t),o(t),c(t)}))};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(dt,{})}),document.getElementById("root")),lt()}},[[387,1,2]]]);
//# sourceMappingURL=main.4476442d.chunk.js.map